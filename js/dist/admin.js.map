{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@justoverclock/flarum-ext-welcomebox/webpack/bootstrap","webpack://@justoverclock/flarum-ext-welcomebox/webpack/runtime/compat get default export","webpack://@justoverclock/flarum-ext-welcomebox/webpack/runtime/define property getters","webpack://@justoverclock/flarum-ext-welcomebox/webpack/runtime/hasOwnProperty shorthand","webpack://@justoverclock/flarum-ext-welcomebox/webpack/runtime/make namespace object","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['app']\"","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['extensions/afrux-forum-widgets-core/common/extend/Widgets']\"","webpack://@justoverclock/flarum-ext-welcomebox/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['extensions/afrux-forum-widgets-core/common/components/Widget']\"","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['forum/app']\"","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['utils/formatNumber']\"","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['helpers/listItems']\"","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['components/AvatarEditor']\"","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['components/SignUpModal']\"","webpack://@justoverclock/flarum-ext-welcomebox/external root \"flarum.core.compat['common/components/Button']\"","webpack://@justoverclock/flarum-ext-welcomebox/./src/common/components/WelcomeBoxWidget.js","webpack://@justoverclock/flarum-ext-welcomebox/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@justoverclock/flarum-ext-welcomebox/./src/admin/index.js","webpack://@justoverclock/flarum-ext-welcomebox/./src/common/registerWidget.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extensions/afrux-forum-widgets-core/common/extend/Widgets'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extensions/afrux-forum-widgets-core/common/components/Widget'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/formatNumber'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/AvatarEditor'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/SignUpModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import Widget from 'flarum/extensions/afrux-forum-widgets-core/common/components/Widget';\nimport app from 'flarum/forum/app';\nimport username from 'flarum/common/helpers/username';\nimport formatNumber from 'flarum/utils/formatNumber';\nimport listItems from 'flarum/helpers/listItems';\nimport AvatarEditor from 'flarum/components/AvatarEditor';\nimport SignUpModal from 'flarum/components/SignUpModal';\nimport Button from 'flarum/common/components/Button';\n\nexport default class WelcomeBoxWidget extends Widget {\n    oninit(vnode) {\n        super.oninit(vnode);\n    }\n\n    className() {\n        return 'welcomebox-widget';\n    }\n\n    icon() {\n        return 'fas fa-user-tie';\n    }\n\n    content() {\n        const user = app.session.user;\n        const money = user.attribute('money'); // 获取金钱数量\n        const moneyName = app.forum.attribute('antoinefr-money.moneyname').replace('[money] ', ''); // 获取金钱名称\n        const useWidget = app.forum.attribute('justoverclock-welcomebox.UseWidget');\n        const isGuestBoxHidden = app.forum.attribute('HideGuestBox');\n        const SettingsLink = app.route('settings');\n        const ImgAvatar =\n            app.forum.attribute('imgUrl') || app.forum.attribute('baseUrl') + '/assets/extensions/justoverclock-welcomebox/no-avatar.png';\n\n        if (useWidget && user) {\n            return (\n                <div className=\"containerwb\">\n                    <div className=\"backgrwb\">\n                        {Button.component({\n                            icon: 'fas fa-sign-out-alt logoutt',\n                            title: app.translator.trans('core.forum.header.log_out_button'),\n                            className: 'Dropdown-toggle Button logwbox',\n                            onclick: app.session.logout.bind(app.session),\n                        })}\n                        <div>\n                            <a href={app.route.user(user)}>\n                                <div className=\"avatarwb\">{AvatarEditor.component({ user })}</div>\n                            </a>\n                            <div className=\"contentwb\">\n                                <div className=\"textinfo\">\n                                    {app.translator.trans('flarum-ext-welcomebox.forum.wback')}\n                                    <br />\n                                    <strong>{username(user)}</strong>\n                                </div>\n                                <div className=\"cont\">\n                                    <div className=\"circletop\">\n                                        <a href={SettingsLink} title={app.translator.trans('core.forum.settings.title')}>\n                                            <i className=\"menuicon fas fa-tasks\" />\n                                        </a>\n                                        <a href={app.route.user(user)} title={app.translator.trans('flarum-ext-welcomebox.forum.tooltipProfile')}>\n                                            <i className=\"menuicon far fa-user\" />\n                                        </a>\n                                        <a\n                                            href={app.route.user(user) + '/mentions'}\n                                            title={app.translator.trans('flarum-ext-welcomebox.forum.tooltipMentions')}\n                                        >\n                                            <i className=\"menuicon fas fa-at\" />\n                                        </a>\n                                        <a\n                                            href={app.route.user(user) + '/discussions'}\n                                            title={app.translator.trans('flarum-ext-welcomebox.forum.tooltipDisclist')}\n                                        >\n                                            <i className=\"menuicon far fa-list-alt\" />\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"iconbadge\">{listItems(user.badges().toArray())}</div>\n                            <div className=\"ulwb contentwb\">\n                                <li>\n                                    <label className=\"textinfo\">{app.translator.trans('flarum-ext-welcomebox.forum.npost')}</label>:{' '}\n                                    <strong className=\"textinfo\">{formatNumber(user.commentCount())}</strong>\n                                </li>\n                                <li>\n                                    <label className=\"textinfo\">{app.translator.trans('flarum-ext-welcomebox.forum.discussion')}</label>:{' '}\n                                    <strong className=\"textinfo\">{formatNumber(user.discussionCount())}</strong>\n                                </li>\n                                <li>\n                                    <label className=\"textinfo\">{moneyName}</label>:{' '}\n                                    <strong className=\"textinfo\">{money}</strong>\n                                </li>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else if (!user && isGuestBoxHidden && useWidget) {\n            return (\n                <div className=\"containerwb\">\n                    <div className=\"backgrwbguest\">\n                        <img className=\"guestavatarimg\" src={ImgAvatar} />\n                        <div className=\"guesttext\">{app.translator.trans('flarum-ext-welcomebox.forum.welcomeguest')}</div>\n                        <p className=\"guestdesc\">{app.translator.trans('flarum-ext-welcomebox.forum.notregistered')}</p>\n                        <button\n                            className=\".SplitDropdown-button Button Button--primary hasIcon\"\n                            type=\"button\"\n                            onclick={(componentClass, attrs) => app.modal.show(SignUpModal, attrs)}\n                        >\n                            {app.translator.trans('core.forum.header.sign_up_link')}\n                        </button>\n                        <div className=\"contentwb\" />\n                    </div>\n                </div>\n            );\n        }\n    }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/app';\nimport registerWidget from '../common/registerWidget';\n\napp.initializers.add('justoverclock-welcomebox', () => {\n    registerWidget(app);\n    app.extensionData\n        .for('justoverclock-welcomebox')\n        .registerSetting({\n            setting: 'justoverclock-welcomebox.UseWidget',\n            label: app.translator.trans('flarum-ext-welcomebox.admin.UseWidget'),\n            type: 'boolean',\n        })\n        .registerSetting({\n            setting: 'justoverclock-welcomebox.hide.guestbox',\n            label: app.translator.trans('flarum-ext-welcomebox.admin.enablepostbox'),\n            type: 'boolean',\n        })\n        .registerSetting({\n            setting: 'justoverclock-welcomebox.imgUrl',\n            name: 'imgUrl',\n            type: 'URL',\n            label: app.translator.trans('flarum-ext-welcomebox.admin.img'),\n            help: app.translator.trans('flarum-ext-welcomebox.admin.img-help'),\n        });\n});\n","import Widgets from 'flarum/extensions/afrux-forum-widgets-core/common/extend/Widgets';\n\nimport WelcomeBoxWidget from './components/WelcomeBoxWidget';\n\nexport default function (app) {\n    new Widgets()\n        .add({\n            key: 'WelcomeBoxWdg',\n            component: WelcomeBoxWidget,\n            isDisabled: false,\n            isUnique: true,\n            placement: 'end',\n            position: 1,\n        })\n        .extend(app, 'justoverclock-welcomebox');\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","WelcomeBoxWidget","subClass","superClass","create","constructor","oninit","vnode","className","icon","content","user","app","money","attribute","moneyName","replace","useWidget","isGuestBoxHidden","SettingsLink","ImgAvatar","Button","title","onclick","href","AvatarEditor","username","listItems","badges","toArray","formatNumber","commentCount","discussionCount","src","type","componentClass","attrs","SignUpModal","Widget","Widgets","add","component","isDisabled","isUnique","placement","position","extend","registerSetting","setting","label","name","help"],"sourceRoot":""}